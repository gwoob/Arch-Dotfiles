#!/bin/sh

# Check if the script is being run with sudo or as root
if [ "$(id -u)" -eq 0 ] && [ "$SUDO_USER" ]; then
    echo "Warning: You don't need to run this script with sudo."
    echo "Please run it as your regular user without sudo."
    exit 1
fi

# Check if a file path is provided as an argument
if [ $# -ne 1 ]; then
    echo "Usage: $0 <file>"
    exit 1
fi

file="$1"

# Check if the current user is root
if [ "$(id -u)" -eq 0 ]; then
    # Root user, use the default editor
    ${EDITOR:-vi} "$file"
else
    # Check if the file requires superuser access
    if [ -w "$file" ]; then
        # The file is writable by the current user, so we can use the default editor
        ${EDITOR:-vi} "$file"
    else
        # The file requires superuser access, use sudoedit to securely edit it
        sudoedit "$file"
    fi
fi
